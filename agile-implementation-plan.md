# HP Planner 実装駆動型開発計画

## 基本方針：Build → Learn → Iterate

**1ヶ月の短期開発では事前検証より実装を通じた学習・調整が効率的**

### 開発アプローチ
1. **UI First**: 見た目から作り込み、ユーザー体験を早期確認
2. **Mock → Real**: 仮データで動作確認後、実API統合
3. **Incremental Integration**: 段階的にバックエンド機能を追加
4. **Fail Fast**: 技術的制約は実装中に発見・即座に代替案

---

## Week 1 (8/27-9/3): Chrome拡張UI + モックデータ

### 🎯 Week 1 Goal
**見た目と基本UXが完成し、モックデータで全画面が動作**

### Day 1-2 (8/27-8/28): Chrome拡張基盤
- [ ] **Chrome MV3プロジェクト初期化**
  - manifest.json 作成
  - popup.html + popup.js 基本構造
  - options.html 設定画面
- [ ] **SVGリングHP表示** 実装
  - 0-100%の円グラフ表示
  - 色分け（緑→黄→赤）
  - 中央に数値表示
- [ ] **基本レイアウト確認**
  - 右下配置・サイズ調整
  - クリック時のポップアップ

### Day 3-4 (8/29-8/30): モックデータ駆動
- [ ] **HP計算ロジック（ローカル版）**
  - JavaScript で係数計算実装
  - 15分スロット更新
  - localStorage でデータ保持
- [ ] **天気モックデータ**
  - 固定JSON で東京天気模擬
  - ベースHP計算実装・表示
- [ ] **会議モックデータ**
  - サンプル会議予定5-6件
  - type/時間/人数のバリエーション

### Day 5-6 (8/31-9/1): インタラクション実装
- [ ] **トースト通知システム**
  - 40%/25%/10% 閾値でポップアップ
  - 「5分休憩」「会議短縮」ボタン
- [ ] **設定画面 (Options)**
  - 係数調整スライダー
  - モックデータON/OFF
  - デバッグ情報表示
- [ ] **60秒ポーリング**
  - HP自動更新・画面リフレッシュ

### Day 7 (9/2): Week 1 統合テスト
- [ ] **フルシナリオ動作確認**
  - 朝の天気→HP設定
  - 会議予定→HP減少
  - 閾値到達→通知→ユーザー操作
- [ ] **UI/UX調整**
  - サイズ・色・フォント最適化
  - レスポンス速度チェック

**Week 1 成功判定**: Chrome拡張が完全にモックデータで動作し、全UXが確認できる

---

## Week 2 (9/4-9/10): 実API統合 + GCP基盤

### 🎯 Week 2 Goal  
**実際のAPIが動作し、Cloud Functions との通信が確立**

### Day 8-9 (9/4-9/5): Firebase/GCP基盤構築
- [ ] **Firebase プロジェクト作成**
  - 課金設定・予算アラート
  - Cloud Functions v2 有効化
- [ ] **Open-Meteo API 実装**
  - 実際の東京天気取得
  - エラーハンドリング・フォールバック
  - Chrome拡張でリアル天気表示
- [ ] **Firestore 基本スキーマ**
  - users, hp_logs コレクション
  - 読み書きテスト

### Day 10-11 (9/6-9/7): Cloud Functions 実装
- [ ] **HP Calculator Function**
  - 複数係数による計算ロジック
  - POST でHP更新要求
- [ ] **Weather Fetcher Function**
  - 毎日06:00の天気取得
  - Cloud Scheduler 設定
- [ ] **Chrome ↔ Functions 通信**
  - CORS設定・認証（API Key）
  - データ送受信確認

### Day 12-13 (9/8-9/9): データ永続化
- [ ] **Firestore 統合**
  - HP履歴保存・読み出し
  - ユーザー設定保存
  - リアルタイム更新（optional）
- [ ] **エラーハンドリング強化**
  - オフライン時のローカル動作
  - API障害時のフォールバック

### Day 14 (9/10): Week 2 統合テスト
- [ ] **E2E実API動作確認**
  - 実天気→HP算出→Firestore保存→拡張表示
  - Cloud Functions ログ確認

**Week 2 成功判定**: 実APIで天気・HP計算が動作し、データがFirestoreに保存される

---

## Week 3 (9/11-9/17): AI Agent 統合

### 🎯 Week 3 Goal
**Vertex AI Gemini で4つのAI Agent が実装・動作**

### Day 15-16 (9/11-9/12): Vertex AI 基盤
- [ ] **Vertex AI認証・接続**
  - サービスアカウント設定
  - Gemini API テスト呼び出し
- [ ] **HPプランナー実装**
  - 天気データ→理由文生成
  - 「今日のHP: 75 (最高32℃で疲労予想)」

### Day 17-18 (9/13-9/14): 会議系AI Agent
- [ ] **会議メタ推定**
  - タイトル+説明→type/vagueScore/syncNecessity
  - JSON出力バリデーション
- [ ] **会議ナビゲータ**
  - HP状況+会議メタ→短縮/非同期化提案
  - 提案文面自動生成

### Day 19-20 (9/15-9/16): ブレイク・インサータ
- [ ] **閾値監視・提案ロジック**
  - HP予測→提案タイミング判定
  - .ics ファイル生成
- [ ] **4つのAgent統合**
  - Cloud Functions で全Agent呼び出し
  - Chrome拡張でAI提案表示

### Day 21 (9/17): Week 3 統合テスト
- [ ] **AI Agent フルフロー**
  - 実データでの4つのAgent連携動作
  - レスポンス時間・コスト確認

**Week 3 成功判定**: 4つのAI Agentが実際に動作し、意味のある提案を生成

---

## Week 4 (9/18-9/24): 統合・最適化・提出

### 🎯 Week 4 Goal
**本番デプロイ・ドキュメント・提出完了**

### Day 22-23 (9/18-9/19): 本番化・最適化
- [ ] **本番環境デプロイ**
  - 本番GCPプロジェクト構築
  - 全機能統合テスト
- [ ] **パフォーマンス調整**
  - Functions起動時間短縮
  - Firestore クエリ最適化

### Day 24-25 (9/20-9/21): ドキュメント作成
- [ ] **GitHub README**
  - セットアップ手順・技術説明
- [ ] **Zenn記事 下書き**
  - 課題・解決策・アーキテクチャ

### Day 26-27 (9/22-9/23): 最終仕上げ
- [ ] **デモ動画撮影・編集**
  - 3分デモ・ナレーション
- [ ] **Zenn記事完成・公開**

### Day 28 (9/24): 提出日
- [ ] **最終動作確認・提出**

---

## 段階的フォールバック戦略

### レベル1: 基本MVP（必須達成）
- Chrome拡張HP表示
- 天気連携・基本HP計算
- 1つのAI Agent（HPプランナー）

### レベル2: 標準版（目標達成）  
- 4つのAI Agent全て
- トースト通知・.ics生成
- Firestore データ保存

### レベル3: 完全版（理想達成）
- パフォーマンス最適化
- エラーハンドリング完璧
- 豊富なドキュメント・デモ

### 技術リスク対策
1. **Vertex AI 制限/高コスト** → OpenAI API 代替
2. **Chrome MV3 制約** → Popup中心設計に変更  
3. **Functions コールドスタート** → 常時起動 or 簡略化
4. **Firestore コスト** → localStorage 中心運用

---

## Daily Progress Tracking

### 毎日の振り返り（15分）
1. **Today's Achievement**: 完了したタスク・発見した課題
2. **Tomorrow's Priority**: 翌日の最重要3タスク
3. **Blockers & Solutions**: 阻害要因・解決策・エスカレーション

### 週次ピボット判断（金曜日）
1. **Goal Achievement**: 週目標達成度・遅延要因
2. **Scope Adjustment**: 機能削減・追加・優先度変更
3. **Risk Assessment**: 新たなリスク・対策・代替案

---

**この実装駆動アプローチで、1ヶ月で確実に動くプロダクトを作り上げましょう！**