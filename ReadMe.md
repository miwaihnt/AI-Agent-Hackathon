# HP Planner - 疲労度管理による業務効率化支援

**Google Cloud Japan AI Hackathon Vol.3** 提出作品

Chrome拡張による疲労度（HP）管理とAI Agentを活用した業務最適化支援アプリケーション

## 📋 プロジェクト概要

見えない疲労（HP）を可視化・管理することで、集中力・満足度・生産性の向上を図り、効率的な会議運営とワークライフバランスの改善を支援します。

### 解決する課題
- 見えない疲労（HP）による集中力・満足度・生産性の低下
- 予定調整の非効率・不公平性  
- 不必要に長い会議や冗長な打ち合わせ

### 主要機能
- **リアルタイムHP表示**: SVGリングによる疲労度可視化
- **天気連携HP算出**: 天候データから初期HP値を自動計算
- **4つのAI Agent**: HPプランナー・会議メタ推定・ナビゲータ・ブレイク挿入
- **自動通知システム**: 閾値到達時の休憩・会議最適化提案
- **設定カスタマイズ**: 個人の疲労パターンに応じた係数調整

## 🛠️ 技術スタック

### フロントエンド
- **Chrome拡張**: Manifest V3
- **実装**: JavaScript + HTML + CSS
- **可視化**: SVG + CSS animations

### バックエンド (予定)
- **GCP**: Firebase Cloud Functions v2, Firestore
- **AI**: Vertex AI Gemini
- **外部API**: Open-Meteo (天気データ)

## 📁 プロジェクト構造

```
src/chrome-extension/
├── manifest.json          # Chrome拡張設定
├── popup.html             # メインUI
├── popup.css              # メインスタイル
├── popup.js               # HP表示・通知ロジック
├── options.html           # 設定画面
├── options.css            # 設定画面スタイル
├── options.js             # 設定管理・デバッグ
├── background.js          # バックグラウンド処理
└── icons/                 # アイコンファイル
```

## 🚀 セットアップ・実行方法

### 開発環境での実行

1. **プロジェクトクローン**
```bash
git clone <repository-url>
cd hp-planner
```

2. **Chrome拡張として読み込み**
- Chrome で `chrome://extensions/` を開く
- 「デベロッパーモード」を有効化
- 「パッケージ化されていない拡張機能を読み込む」をクリック
- `src/chrome-extension` フォルダを選択

3. **拡張機能の使用**
- Chromeツールバーにアイコンが表示される
- アイコンクリックでHP表示ポップアップが開く
- 右クリック → オプションで設定画面が開く

### 現在の実装状況 (Week 1)

✅ **完了済み**
- Chrome MV3基盤構築
- SVGリング HP表示 (0-100%)
- 色分け表示 (緑→黄→赤→点滅)
- 基本レイアウト・デザイン
- 設定画面UI
- トースト通知システム
- .ics ファイル生成・ダウンロード
- モックデータ駆動システム
- バックグラウンド自動更新 (60秒ポーリング)

🔄 **実装中 (Week 2 予定)**
- 実API統合 (Open-Meteo + GCP)
- Cloud Functions デプロイ
- Firestore データ永続化

📅 **今後の予定**
- Week 3: AI Agent 4つ実装
- Week 4: 統合・デプロイ・ドキュメント

## 🎮 使用方法

### 基本操作
1. **HP確認**: 拡張アイコンクリックでHP値確認
2. **設定**: 右クリック → オプションで係数・閾値調整
3. **休憩**: HP低下時のトースト通知から休憩予定を追加
4. **デバッグ**: 開発者向け機能でHP値操作・テスト実行

### 開発・デバッグ
- **コンソール**: `window.hpDisplay.simulateHPChange(-10)` でHP操作
- **設定画面**: デバッグセクションでテスト会議実行・データエクスポート
- **オプション**: モックデータON/OFF・詳細ログ出力

## 📊 HP計算システム

### HP減少計算式
```javascript
HP(t+15) = clamp(
  HP(t) - [
    自然減衰0.5
    + 会議コスト(type係数 × 長さ係数 × 人数係数)
    + 曖昧さ係数(vagueScore)
    + 文脈切替ペナルティ
    + 移動ペナルティ
  ] + 休憩回復,
  0, 100
)
```

### 天気→ベースHP算出
```javascript
HP_base = clamp(
  100
  - max(0, tmax-30) × 1.2    // 暑さ影響
  - max(0, 18-tmin) × 0.5    // 寒さ影響
  - (rainProbMax/100) × 10,  // 雨確率影響
  30, 100
)
```

## 🤖 AI Agent システム (Week 3実装予定)

### 1. HPプランナー
- **入力**: 天気データ (気温・降水確率)
- **出力**: ベースHP + 理由説明文
- **例**: "最高32℃と降水40%により体力消耗が見込まれます"

### 2. 会議メタ推定
- **入力**: 会議タイトル・説明文
- **出力**: type/vagueScore/syncNecessity
- **用途**: HP減少コスト計算・最適化判定

### 3. 会議ナビゲータ  
- **入力**: 参加者HP状況・会議メタ情報
- **出力**: 最適化提案 (短縮・非同期化)
- **例**: "参加者の疲労度を考慮し25分に短縮をお勧めします"

### 4. ブレイク・インサータ
- **入力**: 現在HP・今後の予定
- **出力**: 休憩提案・.ics自動生成
- **閾値**: 40% (注意) → 25% (警告) → 10% (危険)

## ⚙️ カスタマイズ設定

### HP計算係数
- **自然減衰**: 0.5/15分 (時間経過による疲労)
- **会議タイプ係数**: 決定2.0, ブレスト2.5, 報告1.0等
- **長時間係数**: 会議が長くなるほどの追加疲労
- **参加者係数**: 3人目以降による疲労増加

### 通知閾値
- **注意**: 40% (軽い疲労のお知らせ)
- **警告**: 25% (休憩推奨)
- **危険**: 10% (緊急休憩必要)

## 🏆 ハッカソン対応

### 必須要件
- ✅ **Google Cloud実行プロダクト**: Cloud Functions + Firestore使用予定
- ✅ **Google AI技術**: Vertex AI Gemini使用予定  
- ✅ **提出物**: GitHub公開 + デプロイURL + Zenn記事

### 開発マイルストーン
- **Week 1** (8/27-9/3): ✅ Chrome拡張UI完成
- **Week 2** (9/4-9/10): 実API統合・GCP基盤
- **Week 3** (9/11-9/17): AI Agent実装
- **Week 4** (9/18-9/24): 統合・デプロイ・提出

## 📈 今後の拡張予定

### MVP後の機能
- **チーム機能**: メンバー間でのHP信号灯共有
- **学習機能**: 個人のHP減少パターン学習・カスタム係数
- **高度な会議管理**: 入札システム・参加者最適化

### 企業導入向け
- **管理ダッシュボード**: チーム全体のウェルビーイング可視化
- **Slack/Teams連携**: 会議最適化提案の自動送信
- **カレンダー統合**: Google Calendar/Outlook連携

## 🔧 開発・コントリビューション

### 開発環境
- Node.js 18+ 推奨
- Chrome/Chromium ブラウザ
- VS Code + Chrome Extension開発用拡張

### コードスタイル
- ES6+ JavaScript
- Semantic HTML5
- CSS Grid/Flexbox
- Chrome MV3準拠

## 📄 ライセンス

MIT License

---

**HP Planner** - 疲労をデザインし、生産性を最適化する  
Created for Google Cloud Japan AI Hackathon Vol.3  
Team: [Your Team Name]  
Date: 2025-08-27